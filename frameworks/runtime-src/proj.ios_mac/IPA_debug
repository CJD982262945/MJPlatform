
filepath=$(cd "$(dirname "$0")"; pwd)

DATE=$(date +%H%M)
echo ${DATE}

#CODE_SIGN_NAME="iPhone Distribution: Guangzhou Yingzheng Information Technology Co.,Ltd"
CODE_SIGN_NAME="iPhone Developer: hong chen (386J462B3S)"

PROJECT_PATH=$filepath

PRODUCT_PATH=/Users/$LOGNAME/Desktop
 
PRODUCT_PATH=${PROJECT_PATH}"/build/Debug-iphoneos"
 
IPA_NAME=${PRODUCT_PATH}"/GameChess_Debug_${DATE}.ipa"

xcodebuild -project ${PROJECT_PATH}/GameChess.xcodeproj -target "GameChess-mobile" clean
 
xcodebuild -project ${PROJECT_PATH}/GameChess.xcodeproj -sdk iphoneos -scheme "GameChess-mobile" -configuration Debug CONFIGURATION_BUILD_DIR=${PRODUCT_PATH} CODE_SIGN_IDENTITY="${CODE_SIGN_NAME}"
 
xcrun -sdk iphoneos PackageApplication -v ${PRODUCT_PATH}"/GameChess-mobile.app" -o ${IPA_NAME} CODE_SIGN_IDENTITY "${CODE_SIGN_NAME}" --embed "pacaifubaoent_InHouse.mobileprovision"
 
open ${PRODUCT_PATH}


